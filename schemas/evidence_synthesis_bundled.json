{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "evidence_synthesis.schema.json",
  "title": "Evidence Synthesis Extraction (Systematic Review / Meta-analysis / NMA / IPD / Umbrella)",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "amstar2_rating",
    "certainty_of_evidence",
    "data_collection",
    "document",
    "eligibility",
    "extraction_warnings",
    "figures_summary",
    "generator",
    "included_studies",
    "language",
    "living_review",
    "metadata",
    "open_science",
    "outcomes",
    "prisma_flow",
    "prisma_reporting",
    "protocol",
    "publication_bias",
    "review_type",
    "risk_of_bias_summary",
    "robis_assessment",
    "schema_version",
    "search",
    "sensitivity_analyses",
    "study_id",
    "syntheses",
    "tables_parsed",
    "truncated"
  ],
  "properties": {
    "schema_version": {
      "type": "string",
      "pattern": "^v\\d+\\.\\d+(\\.\\d+)?$",
      "description": "Semantic-like version tag, e.g. v1.0 of v1.2.3"
    },
    "document": {
      "type": [
        "object",
        "null"
      ],
      "additionalProperties": false,
      "required": [
        "filename",
        "page_count"
      ],
      "properties": {
        "filename": {
          "type": "string"
        },
        "content_type": {
          "type": "string",
          "enum": [
            "application/pdf"
          ],
          "default": "application/pdf"
        },
        "size_bytes": {
          "type": "integer",
          "minimum": 0
        },
        "page_count": {
          "type": "integer",
          "minimum": 1
        }
      }
    },
    "study_id": {
      "type": [
        "string",
        "null"
      ],
      "pattern": "^[A-Za-z0-9._-]+$",
      "description": "Internal opaque ID for this article (the review itself)"
    },
    "generator": {
      "type": [
        "object",
        "null"
      ],
      "additionalProperties": false,
      "required": [
        "name",
        "model",
        "timestamp"
      ],
      "properties": {
        "name": {
          "type": "string"
        },
        "model": {
          "type": "string"
        },
        "temperature": {
          "type": "number"
        },
        "timestamp": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "language": {
      "$ref": "#/$defs/LanguageCode"
    },
    "metadata": {
      "$ref": "#/$defs/Metadata"
    },
    "review_type": {
      "type": "string",
      "enum": [
        "Systematic review (no meta-analysis)",
        "Pairwise meta-analysis",
        "Network meta-analysis",
        "IPD meta-analysis",
        "Umbrella/Overview review",
        "Scoping review"
      ]
    },
    "protocol": {
      "type": [
        "object",
        "null"
      ],
      "additionalProperties": false,
      "properties": {
        "prospero_id": {
          "type": "string"
        },
        "protocol_doi": {
          "type": "string",
          "pattern": "^10\\.\\d{4,9}/[-._;()/:A-Za-z0-9]+$"
        },
        "registration": {
          "$ref": "#/$defs/Registration"
        },
        "deviations_from_protocol": {
          "type": "string"
        },
        "source": {
          "$ref": "#/$defs/SourceRef"
        }
      }
    },
    "living_review": {
      "type": [
        "object",
        "null"
      ],
      "description": "Information for living systematic reviews that are continually updated",
      "additionalProperties": false,
      "properties": {
        "is_living_review": {
          "type": "boolean",
          "default": false
        },
        "version_number": {
          "type": "string",
          "description": "Version of this living review (e.g., v1.0, v2.1)"
        },
        "version_date": {
          "type": "string",
          "format": "date"
        },
        "update_schedule": {
          "type": "object",
          "properties": {
            "frequency": {
              "type": [
                "string",
                "null"
              ],
              "enum": [
                "monthly",
                "quarterly",
                "biannually",
                "annually",
                "event_triggered",
                "continuous"
              ]
            },
            "next_planned_update": {
              "type": [
                "string",
                "null"
              ],
              "format": "date"
            },
            "surveillance_method": {
              "type": [
                "string",
                "null"
              ],
              "description": "How new evidence is monitored (e.g., automated alerts, manual searches)"
            }
          },
          "additionalProperties": false,
          "required": [
            "frequency",
            "next_planned_update",
            "surveillance_method"
          ]
        },
        "trigger_criteria": {
          "type": "object",
          "description": "Criteria that trigger an update of the review",
          "properties": {
            "new_studies_threshold": {
              "type": [
                "integer",
                "null"
              ],
              "minimum": 1,
              "description": "Number of new studies needed to trigger update"
            },
            "change_in_conclusion": {
              "type": [
                "boolean",
                "null"
              ],
              "description": "Update if new evidence changes conclusion"
            },
            "substantial_new_evidence": {
              "type": [
                "boolean",
                "null"
              ]
            },
            "methodological_advances": {
              "type": [
                "boolean",
                "null"
              ]
            },
            "stakeholder_request": {
              "type": [
                "boolean",
                "null"
              ]
            }
          },
          "additionalProperties": false,
          "required": [
            "change_in_conclusion",
            "methodological_advances",
            "new_studies_threshold",
            "stakeholder_request",
            "substantial_new_evidence"
          ]
        },
        "version_history": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "version": {
                "type": [
                  "string",
                  "null"
                ]
              },
              "date": {
                "type": [
                  "string",
                  "null"
                ],
                "format": "date"
              },
              "new_studies_added": {
                "type": [
                  "integer",
                  "null"
                ],
                "minimum": 0
              },
              "studies_excluded": {
                "type": [
                  "integer",
                  "null"
                ],
                "minimum": 0
              },
              "major_changes": {
                "type": [
                  "string",
                  "null"
                ]
              },
              "conclusion_changed": {
                "type": [
                  "boolean",
                  "null"
                ]
              },
              "doi": {
                "type": [
                  "string",
                  "null"
                ],
                "pattern": "^10\\.\\d{4,9}/[-._;()/:A-Za-z0-9]+$"
              }
            },
            "additionalProperties": false,
            "required": [
              "conclusion_changed",
              "date",
              "doi",
              "major_changes",
              "new_studies_added",
              "studies_excluded",
              "version"
            ]
          },
          "default": []
        },
        "changes_since_last_version": {
          "type": "object",
          "properties": {
            "new_studies": {
              "type": [
                "integer",
                "null"
              ],
              "minimum": 0
            },
            "removed_studies": {
              "type": [
                "integer",
                "null"
              ],
              "minimum": 0
            },
            "updated_analyses": {
              "type": [
                "array",
                "null"
              ],
              "items": {
                "type": "string"
              }
            },
            "narrative_summary": {
              "type": [
                "string",
                "null"
              ]
            }
          },
          "additionalProperties": false,
          "required": [
            "narrative_summary",
            "new_studies",
            "removed_studies",
            "updated_analyses"
          ]
        },
        "discontinuation": {
          "type": "object",
          "properties": {
            "discontinued": {
              "type": [
                "boolean",
                "null"
              ],
              "default": false
            },
            "discontinuation_date": {
              "type": [
                "string",
                "null"
              ],
              "format": "date"
            },
            "reason": {
              "type": [
                "string",
                "null"
              ]
            }
          },
          "additionalProperties": false,
          "required": [
            "discontinuation_date",
            "discontinued",
            "reason"
          ]
        }
      }
    },
    "eligibility": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "comparators",
        "exclusion_criteria",
        "intervention_or_exposure",
        "language_restrictions",
        "outcomes",
        "population",
        "setting",
        "source",
        "study_designs",
        "timeframe"
      ],
      "properties": {
        "population": {
          "type": "string"
        },
        "intervention_or_exposure": {
          "type": "string"
        },
        "comparators": {
          "type": "string"
        },
        "outcomes": {
          "type": "string"
        },
        "study_designs": {
          "type": "string",
          "description": "Eligible primary study designs (e.g., RCTs, cohorts)"
        },
        "setting": {
          "type": [
            "string",
            "null"
          ]
        },
        "language_restrictions": {
          "type": [
            "string",
            "null"
          ]
        },
        "timeframe": {
          "type": [
            "string",
            "null"
          ],
          "description": "Publication date limits, if any"
        },
        "exclusion_criteria": {
          "type": [
            "string",
            "null"
          ]
        },
        "source": {
          "$ref": "#/$defs/SourceRef"
        }
      }
    },
    "search": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "databases",
        "date_from",
        "date_to",
        "deduplication_approach",
        "last_search_date",
        "other_sources",
        "search_strings",
        "source"
      ],
      "properties": {
        "databases": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "minItems": 1
        },
        "other_sources": {
          "type": [
            "array",
            "null"
          ],
          "description": "Trial registries, grey literature, handsearching, reference lists",
          "items": {
            "type": "string"
          },
          "default": []
        },
        "search_strings": {
          "type": [
            "array",
            "null"
          ],
          "description": "Optional per-database search strategies",
          "items": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
              "database": {
                "type": [
                  "string",
                  "null"
                ]
              },
              "query": {
                "type": [
                  "string",
                  "null"
                ]
              }
            },
            "required": [
              "database",
              "query"
            ]
          },
          "default": []
        },
        "date_from": {
          "type": [
            "string",
            "null"
          ],
          "format": "date"
        },
        "date_to": {
          "type": [
            "string",
            "null"
          ],
          "format": "date"
        },
        "last_search_date": {
          "type": "string",
          "format": "date"
        },
        "deduplication_approach": {
          "type": [
            "string",
            "null"
          ]
        },
        "source": {
          "$ref": "#/$defs/SourceRef"
        }
      }
    },
    "prisma_flow": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "full_text_assessed",
        "full_text_excluded",
        "prisma_figure",
        "reasons_excluded",
        "records_after_duplicates",
        "records_excluded",
        "records_identified",
        "records_screened",
        "studies_included"
      ],
      "properties": {
        "records_identified": {
          "type": "integer",
          "minimum": 0
        },
        "records_after_duplicates": {
          "type": [
            "integer",
            "null"
          ],
          "minimum": 0
        },
        "records_screened": {
          "type": [
            "integer",
            "null"
          ],
          "minimum": 0
        },
        "records_excluded": {
          "type": [
            "integer",
            "null"
          ],
          "minimum": 0
        },
        "full_text_assessed": {
          "type": [
            "integer",
            "null"
          ],
          "minimum": 0
        },
        "full_text_excluded": {
          "type": [
            "integer",
            "null"
          ],
          "minimum": 0
        },
        "studies_included": {
          "type": "integer",
          "minimum": 0
        },
        "reasons_excluded": {
          "type": [
            "array",
            "null"
          ],
          "items": {
            "type": "string"
          },
          "default": []
        },
        "prisma_figure": {
          "$ref": "#/$defs/SourceRef"
        }
      }
    },
    "data_collection": {
      "type": [
        "object",
        "null"
      ],
      "additionalProperties": false,
      "properties": {
        "risk_of_bias_tool": {
          "type": "string",
          "enum": [
            "RoB2",
            "ROBINS-I",
            "Other",
            "Not reported"
          ]
        },
        "effect_size_computation": {
          "type": "string",
          "description": "Rules for effect measure selection & transformation"
        },
        "unit_of_analysis_issues": {
          "type": "string"
        },
        "multiplicity_strategy": {
          "type": "string",
          "description": "Handling multiple outcomes/timepoints/arms"
        },
        "source": {
          "$ref": "#/$defs/SourceRef"
        },
        "software": {
          "type": "string",
          "description": "Bijv. RevMan, R (metafor/netmeta), Stata, JASP"
        },
        "double_extraction": {
          "type": "boolean",
          "default": false
        },
        "adjudication_rate_pct": {
          "type": "number",
          "minimum": 0,
          "maximum": 100
        },
        "conversion_rules": {
          "type": "string",
          "description": "Bijv. median→mean/SD, HR uit KM, SMD↔MD"
        },
        "unit_harmonization": {
          "type": "string",
          "description": "Regels voor omrekenen units/schalen"
        }
      }
    },
    "included_studies": {
      "type": [
        "array",
        "null"
      ],
      "description": "Minimal per-study references used in the synthesis.",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "design",
          "doi",
          "n",
          "notes",
          "pmid",
          "source",
          "study_label"
        ],
        "properties": {
          "study_label": {
            "type": "string",
            "description": "Short label or citation key (e.g., 'Smith 2020')"
          },
          "design": {
            "type": [
              "string",
              "null"
            ]
          },
          "n": {
            "type": [
              "integer",
              "null"
            ],
            "minimum": 0
          },
          "doi": {
            "type": [
              "string",
              "null"
            ],
            "pattern": "^10\\.\\d{4,9}/[-._;()/:A-Za-z0-9]+$"
          },
          "pmid": {
            "type": [
              "string",
              "null"
            ],
            "pattern": "^\\d{1,8}$"
          },
          "notes": {
            "type": [
              "string",
              "null"
            ]
          },
          "source": {
            "$ref": "#/$defs/SourceRef"
          }
        }
      },
      "default": []
    },
    "outcomes": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/SynthesisOutcome"
      },
      "minItems": 1
    },
    "syntheses": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/Synthesis"
      },
      "default": []
    },
    "risk_of_bias_summary": {
      "type": [
        "object",
        "null"
      ],
      "additionalProperties": false,
      "properties": {
        "tool": {
          "type": "string",
          "enum": [
            "RoB2",
            "ROBINS-I",
            "Other"
          ]
        },
        "summary_text": {
          "type": "string"
        },
        "fig_source": {
          "$ref": "#/$defs/SourceRef"
        },
        "per_study_assessments": {
          "type": "array",
          "description": "Detailed risk of bias assessment per included study",
          "items": {
            "type": "object",
            "required": [
              "rob_assessment",
              "source",
              "study_label",
              "weight_in_meta_analysis"
            ],
            "properties": {
              "study_label": {
                "type": "string"
              },
              "rob_assessment": {
                "$ref": "#/$defs/RiskOfBias"
              },
              "weight_in_meta_analysis": {
                "type": [
                  "number",
                  "null"
                ],
                "minimum": 0,
                "maximum": 100
              },
              "source": {
                "$ref": "#/$defs/SourceRef"
              }
            },
            "additionalProperties": false
          },
          "default": []
        },
        "overall_rob_distribution": {
          "type": "object",
          "properties": {
            "low_risk_pct": {
              "type": [
                "number",
                "null"
              ],
              "minimum": 0,
              "maximum": 100
            },
            "some_concerns_pct": {
              "type": [
                "number",
                "null"
              ],
              "minimum": 0,
              "maximum": 100
            },
            "high_risk_pct": {
              "type": [
                "number",
                "null"
              ],
              "minimum": 0,
              "maximum": 100
            }
          },
          "additionalProperties": false,
          "required": [
            "high_risk_pct",
            "low_risk_pct",
            "some_concerns_pct"
          ]
        }
      }
    },
    "certainty_of_evidence": {
      "type": [
        "array",
        "null"
      ],
      "description": "GRADE per outcome (if reported).",
      "items": {
        "$ref": "#/$defs/GradeAssessment"
      },
      "default": []
    },
    "publication_bias": {
      "type": [
        "object",
        "null"
      ],
      "additionalProperties": false,
      "properties": {
        "funnel_plot_source": {
          "$ref": "#/$defs/SourceRef"
        },
        "egger_test_p": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        },
        "trim_and_fill_applied": {
          "type": "boolean",
          "default": false
        },
        "small_study_methods": {
          "type": "string",
          "description": "Egger, Begg, contour-enhanced funnel, selection models"
        },
        "p_curve_analysis": {
          "type": "object",
          "properties": {
            "p_curve_plot_source": {
              "$ref": "#/$defs/SourceRef"
            },
            "evidential_value": {
              "type": [
                "string",
                "null"
              ],
              "enum": [
                "present",
                "absent",
                "inadequate",
                "unclear"
              ]
            },
            "test_for_right_skew_p": {
              "type": [
                "number",
                "null"
              ],
              "minimum": 0,
              "maximum": 1
            },
            "test_for_flatness_p": {
              "type": [
                "number",
                "null"
              ],
              "minimum": 0,
              "maximum": 1
            }
          },
          "additionalProperties": false,
          "required": [
            "evidential_value",
            "p_curve_plot_source",
            "test_for_flatness_p",
            "test_for_right_skew_p"
          ]
        },
        "pet_peese": {
          "type": "object",
          "properties": {
            "pet_estimate": {
              "type": [
                "number",
                "null"
              ]
            },
            "pet_p_value": {
              "type": [
                "number",
                "null"
              ],
              "minimum": 0,
              "maximum": 1
            },
            "peese_estimate": {
              "type": [
                "number",
                "null"
              ]
            },
            "peese_p_value": {
              "type": [
                "number",
                "null"
              ],
              "minimum": 0,
              "maximum": 1
            },
            "recommended_estimate": {
              "type": [
                "string",
                "null"
              ],
              "enum": [
                "pet",
                "peese",
                "neither"
              ]
            }
          },
          "additionalProperties": false,
          "required": [
            "peese_estimate",
            "peese_p_value",
            "pet_estimate",
            "pet_p_value",
            "recommended_estimate"
          ]
        },
        "selection_models": {
          "type": "object",
          "properties": {
            "model_type": {
              "type": [
                "string",
                "null"
              ],
              "enum": [
                "copas",
                "3psm",
                "step_function",
                "other"
              ]
            },
            "adjusted_estimate": {
              "$ref": "#/$defs/ContrastEffect"
            },
            "tau2_adjusted": {
              "type": [
                "number",
                "null"
              ],
              "minimum": 0
            },
            "notes": {
              "type": [
                "string",
                "null"
              ]
            }
          },
          "additionalProperties": false,
          "required": [
            "adjusted_estimate",
            "model_type",
            "notes",
            "tau2_adjusted"
          ]
        },
        "excess_significance_test": {
          "type": "object",
          "properties": {
            "observed_significant": {
              "type": [
                "integer",
                "null"
              ],
              "minimum": 0
            },
            "expected_significant": {
              "type": [
                "number",
                "null"
              ],
              "minimum": 0
            },
            "p_value": {
              "type": [
                "number",
                "null"
              ],
              "minimum": 0,
              "maximum": 1
            },
            "evidence_of_bias": {
              "type": [
                "boolean",
                "null"
              ]
            }
          },
          "additionalProperties": false,
          "required": [
            "evidence_of_bias",
            "expected_significant",
            "observed_significant",
            "p_value"
          ]
        },
        "contour_enhanced_funnel": {
          "type": "object",
          "properties": {
            "plot_source": {
              "$ref": "#/$defs/SourceRef"
            },
            "pattern_interpretation": {
              "type": [
                "string",
                "null"
              ]
            }
          },
          "additionalProperties": false,
          "required": [
            "pattern_interpretation",
            "plot_source"
          ]
        },
        "notes": {
          "type": "string"
        }
      }
    },
    "sensitivity_analyses": {
      "type": [
        "array",
        "null"
      ],
      "description": "Sensitivity analyses to test robustness of findings",
      "items": {
        "$ref": "#/$defs/SensitivityAnalysis"
      },
      "default": []
    },
    "prisma_reporting": {
      "$ref": "#/$defs/PrismaReporting"
    },
    "amstar2_rating": {
      "$ref": "#/$defs/Amstar2Assessment"
    },
    "robis_assessment": {
      "type": [
        "object",
        "null"
      ],
      "description": "ROBIS (Risk Of Bias In Systematic reviews) tool assessment",
      "additionalProperties": false,
      "properties": {
        "overall_risk_of_bias": {
          "type": "string",
          "enum": [
            "low",
            "high",
            "unclear"
          ]
        },
        "phase_1_relevance": {
          "type": "object",
          "properties": {
            "review_question_match": {
              "type": [
                "boolean",
                "null"
              ]
            },
            "concerns": {
              "type": [
                "string",
                "null"
              ]
            }
          },
          "additionalProperties": false,
          "required": [
            "concerns",
            "review_question_match"
          ]
        },
        "phase_2_domains": {
          "type": "object",
          "properties": {
            "study_eligibility_criteria": {
              "type": [
                "object",
                "null"
              ],
              "properties": {
                "risk_of_bias": {
                  "type": "string",
                  "enum": [
                    "low",
                    "high",
                    "unclear"
                  ]
                },
                "concerns": {
                  "type": "string"
                }
              }
            },
            "identification_and_selection": {
              "type": [
                "object",
                "null"
              ],
              "properties": {
                "risk_of_bias": {
                  "type": "string",
                  "enum": [
                    "low",
                    "high",
                    "unclear"
                  ]
                },
                "concerns": {
                  "type": "string"
                }
              }
            },
            "data_collection_and_study_appraisal": {
              "type": [
                "object",
                "null"
              ],
              "properties": {
                "risk_of_bias": {
                  "type": "string",
                  "enum": [
                    "low",
                    "high",
                    "unclear"
                  ]
                },
                "concerns": {
                  "type": "string"
                }
              }
            },
            "synthesis_and_findings": {
              "type": [
                "object",
                "null"
              ],
              "properties": {
                "risk_of_bias": {
                  "type": "string",
                  "enum": [
                    "low",
                    "high",
                    "unclear"
                  ]
                },
                "concerns": {
                  "type": "string"
                }
              }
            }
          },
          "additionalProperties": false,
          "required": [
            "data_collection_and_study_appraisal",
            "identification_and_selection",
            "study_eligibility_criteria",
            "synthesis_and_findings"
          ]
        },
        "phase_3_overall_assessment": {
          "type": "string"
        }
      }
    },
    "open_science": {
      "$ref": "#/$defs/OpenScience"
    },
    "tables_parsed": {
      "type": [
        "array",
        "null"
      ],
      "items": {
        "$ref": "#/$defs/ParsedTable"
      },
      "default": []
    },
    "figures_summary": {
      "type": [
        "array",
        "null"
      ],
      "items": {
        "$ref": "#/$defs/FigureSummary"
      },
      "default": []
    },
    "extraction_warnings": {
      "type": [
        "array",
        "null"
      ],
      "items": {
        "$ref": "#/$defs/ExtractionWarning"
      },
      "default": []
    },
    "truncated": {
      "$ref": "#/$defs/TruncationInfo"
    }
  },
  "$defs": {
    "SynthesisOutcome": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "definition",
        "direction_of_benefit",
        "measurement_method",
        "name",
        "outcome_id",
        "preferred_effect_measure",
        "scale_max",
        "scale_min",
        "source",
        "timepoint",
        "timepoint_iso8601",
        "type",
        "unit"
      ],
      "properties": {
        "outcome_id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "definition": {
          "type": [
            "string",
            "null"
          ]
        },
        "type": {
          "type": "string",
          "enum": [
            "binary",
            "continuous",
            "time_to_event",
            "ordinal",
            "count"
          ]
        },
        "direction_of_benefit": {
          "type": [
            "string",
            "null"
          ],
          "enum": [
            "higher_better",
            "lower_better",
            "neutral_or_na"
          ]
        },
        "preferred_effect_measure": {
          "type": [
            "string",
            "null"
          ],
          "enum": [
            "RR",
            "IRR",
            "OR",
            "HR",
            "MD",
            "SMD",
            "RD",
            "RMST",
            "Other"
          ]
        },
        "unit": {
          "type": [
            "string",
            "null"
          ]
        },
        "timepoint": {
          "type": [
            "string",
            "null"
          ]
        },
        "timepoint_iso8601": {
          "$ref": "#/$defs/ISO8601Duration"
        },
        "measurement_method": {
          "type": [
            "string",
            "null"
          ]
        },
        "scale_min": {
          "type": [
            "number",
            "null"
          ]
        },
        "scale_max": {
          "type": [
            "number",
            "null"
          ]
        },
        "source": {
          "$ref": "#/$defs/SourceRef"
        }
      }
    },
    "PooledEffect": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "effect",
        "heterogeneity",
        "k_studies",
        "meta_regression",
        "meta_regression_terms",
        "method",
        "model",
        "notes",
        "outlier_detection",
        "prediction_interval",
        "source",
        "subgroup",
        "subgroup_analysis"
      ],
      "properties": {
        "k_studies": {
          "type": [
            "integer",
            "null"
          ],
          "minimum": 1
        },
        "model": {
          "type": [
            "string",
            "null"
          ],
          "enum": [
            "fixed",
            "random",
            "bayesian",
            "na"
          ]
        },
        "method": {
          "type": [
            "string",
            "null"
          ],
          "description": "Estimator or approach (e.g., DL, REML, ML, Bayesian MCMC)"
        },
        "effect": {
          "$ref": "#/$defs/ContrastEffect"
        },
        "prediction_interval": {
          "type": [
            "object",
            "null"
          ],
          "additionalProperties": false,
          "properties": {
            "lower": {
              "type": "number"
            },
            "upper": {
              "type": "number"
            }
          }
        },
        "heterogeneity": {
          "type": [
            "object",
            "null"
          ],
          "additionalProperties": false,
          "properties": {
            "Q": {
              "type": "number"
            },
            "df": {
              "type": "number"
            },
            "p_Q": {
              "type": "number",
              "minimum": 0,
              "maximum": 1
            },
            "I2_pct": {
              "type": "number",
              "minimum": 0,
              "maximum": 100
            },
            "tau2": {
              "type": "number",
              "minimum": 0
            },
            "tau": {
              "type": "number",
              "minimum": 0
            },
            "H": {
              "type": "number",
              "minimum": 0
            },
            "I2_ci_lower": {
              "type": "number",
              "minimum": 0,
              "maximum": 100
            },
            "I2_ci_upper": {
              "type": "number",
              "minimum": 0,
              "maximum": 100
            },
            "tau2_ci_lower": {
              "type": "number",
              "minimum": 0
            },
            "tau2_ci_upper": {
              "type": "number",
              "minimum": 0
            }
          }
        },
        "subgroup": {
          "type": [
            "string",
            "null"
          ]
        },
        "subgroup_analysis": {
          "type": [
            "object",
            "null"
          ],
          "properties": {
            "subgroups": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "subgroup_name": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "k_studies": {
                    "type": [
                      "integer",
                      "null"
                    ],
                    "minimum": 1
                  },
                  "pooled_effect": {
                    "$ref": "#/$defs/ContrastEffect"
                  },
                  "I2_pct": {
                    "type": [
                      "number",
                      "null"
                    ],
                    "minimum": 0,
                    "maximum": 100
                  },
                  "tau2": {
                    "type": [
                      "number",
                      "null"
                    ],
                    "minimum": 0
                  }
                },
                "additionalProperties": false,
                "required": [
                  "I2_pct",
                  "k_studies",
                  "pooled_effect",
                  "subgroup_name",
                  "tau2"
                ]
              }
            },
            "test_for_subgroup_differences": {
              "type": "object",
              "properties": {
                "Q_between": {
                  "type": [
                    "number",
                    "null"
                  ],
                  "minimum": 0
                },
                "df": {
                  "type": [
                    "integer",
                    "null"
                  ],
                  "minimum": 1
                },
                "p_value": {
                  "type": [
                    "number",
                    "null"
                  ],
                  "minimum": 0,
                  "maximum": 1
                },
                "I2_between_pct": {
                  "type": [
                    "number",
                    "null"
                  ],
                  "minimum": 0,
                  "maximum": 100
                }
              },
              "additionalProperties": false,
              "required": [
                "I2_between_pct",
                "Q_between",
                "df",
                "p_value"
              ]
            }
          }
        },
        "meta_regression": {
          "type": [
            "object",
            "null"
          ],
          "properties": {
            "covariates": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "covariate_name": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "coefficient": {
                    "type": [
                      "number",
                      "null"
                    ]
                  },
                  "se": {
                    "type": [
                      "number",
                      "null"
                    ],
                    "minimum": 0
                  },
                  "ci_lower": {
                    "type": [
                      "number",
                      "null"
                    ]
                  },
                  "ci_upper": {
                    "type": [
                      "number",
                      "null"
                    ]
                  },
                  "p_value": {
                    "type": [
                      "number",
                      "null"
                    ],
                    "minimum": 0,
                    "maximum": 1
                  },
                  "standardized": {
                    "type": [
                      "boolean",
                      "null"
                    ]
                  }
                },
                "additionalProperties": false,
                "required": [
                  "ci_lower",
                  "ci_upper",
                  "coefficient",
                  "covariate_name",
                  "p_value",
                  "se",
                  "standardized"
                ]
              }
            },
            "model_fit": {
              "type": "object",
              "properties": {
                "R2": {
                  "type": [
                    "number",
                    "null"
                  ],
                  "minimum": 0,
                  "maximum": 1,
                  "description": "Proportion of heterogeneity explained"
                },
                "tau2_residual": {
                  "type": [
                    "number",
                    "null"
                  ],
                  "minimum": 0
                },
                "QM": {
                  "type": [
                    "number",
                    "null"
                  ],
                  "description": "Test statistic for moderators"
                },
                "QM_p": {
                  "type": [
                    "number",
                    "null"
                  ],
                  "minimum": 0,
                  "maximum": 1
                }
              },
              "additionalProperties": false,
              "required": [
                "QM",
                "QM_p",
                "R2",
                "tau2_residual"
              ]
            }
          }
        },
        "outlier_detection": {
          "type": [
            "object",
            "null"
          ],
          "properties": {
            "method": {
              "type": "string",
              "enum": [
                "studentized_residuals",
                "cooks_distance",
                "dffits",
                "other"
              ]
            },
            "outliers_identified": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "study_label": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "statistic_value": {
                    "type": [
                      "number",
                      "null"
                    ]
                  },
                  "threshold": {
                    "type": [
                      "number",
                      "null"
                    ]
                  },
                  "influential": {
                    "type": [
                      "boolean",
                      "null"
                    ]
                  }
                },
                "additionalProperties": false,
                "required": [
                  "influential",
                  "statistic_value",
                  "study_label",
                  "threshold"
                ]
              }
            }
          }
        },
        "meta_regression_terms": {
          "type": [
            "array",
            "null"
          ],
          "items": {
            "type": "string"
          },
          "default": []
        },
        "notes": {
          "type": [
            "string",
            "null"
          ]
        },
        "source": {
          "$ref": "#/$defs/SourceRef"
        }
      }
    },
    "PairwiseMetaAnalysis": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "comparison_label",
        "outcome_id",
        "per_study_effects",
        "pooled"
      ],
      "properties": {
        "comparison_label": {
          "type": "string",
          "description": "e.g., Drug A vs placebo"
        },
        "outcome_id": {
          "type": "string"
        },
        "per_study_effects": {
          "type": [
            "array",
            "null"
          ],
          "description": "Optional: study-level effect sizes contributing to the pool",
          "items": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "effect",
              "source",
              "study_label",
              "weight_pct"
            ],
            "properties": {
              "study_label": {
                "type": "string"
              },
              "effect": {
                "$ref": "#/$defs/ContrastEffect"
              },
              "weight_pct": {
                "type": [
                  "number",
                  "null"
                ],
                "minimum": 0,
                "maximum": 100
              },
              "source": {
                "$ref": "#/$defs/SourceRef"
              }
            }
          },
          "default": []
        },
        "pooled": {
          "$ref": "#/$defs/PooledEffect"
        }
      }
    },
    "NetworkMetaAnalysis": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "cinema_assessment",
        "comparison_adjusted_funnel_plot",
        "consistency_assumed",
        "contribution_matrix",
        "inconsistency",
        "league_table",
        "model",
        "network_geometry",
        "notes",
        "outcome_id",
        "pooled_effects",
        "ranking",
        "reference_treatment",
        "transitivity_assessment",
        "treatments"
      ],
      "properties": {
        "outcome_id": {
          "type": "string"
        },
        "treatments": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "minItems": 2
        },
        "reference_treatment": {
          "type": "string"
        },
        "model": {
          "type": "string",
          "enum": [
            "fixed",
            "random",
            "bayesian"
          ]
        },
        "consistency_assumed": {
          "type": [
            "boolean",
            "null"
          ],
          "default": true
        },
        "pooled_effects": {
          "type": "array",
          "description": "Relative effects for pairs vs reference or all pairs.",
          "items": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "effect",
              "source",
              "treatment_a",
              "treatment_b"
            ],
            "properties": {
              "treatment_a": {
                "type": "string"
              },
              "treatment_b": {
                "type": "string"
              },
              "effect": {
                "$ref": "#/$defs/ContrastEffect"
              },
              "source": {
                "$ref": "#/$defs/SourceRef"
              }
            }
          }
        },
        "ranking": {
          "type": [
            "array",
            "null"
          ],
          "description": "Optional ranking metrics per treatment (e.g., SUCRA).",
          "items": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "treatment",
              "metric_name",
              "value"
            ],
            "properties": {
              "treatment": {
                "type": "string"
              },
              "metric_name": {
                "type": "string",
                "enum": [
                  "SUCRA",
                  "P(best)",
                  "other"
                ]
              },
              "value": {
                "type": "number",
                "minimum": 0
              }
            }
          },
          "default": []
        },
        "inconsistency": {
          "type": [
            "object",
            "null"
          ],
          "additionalProperties": false,
          "properties": {
            "global_test_p": {
              "type": "number",
              "minimum": 0,
              "maximum": 1
            },
            "node_splitting": {
              "type": "array",
              "items": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                  "comparison": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "p_inconsistency": {
                    "type": [
                      "number",
                      "null"
                    ],
                    "minimum": 0,
                    "maximum": 1
                  },
                  "direct_estimate": {
                    "$ref": "#/$defs/ContrastEffect"
                  },
                  "indirect_estimate": {
                    "$ref": "#/$defs/ContrastEffect"
                  },
                  "difference": {
                    "type": [
                      "number",
                      "null"
                    ]
                  }
                },
                "required": [
                  "comparison",
                  "difference",
                  "direct_estimate",
                  "indirect_estimate",
                  "p_inconsistency"
                ]
              },
              "default": []
            },
            "design_by_treatment": {
              "type": "string"
            },
            "side_splitting": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "comparison": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "p_inconsistency": {
                    "type": [
                      "number",
                      "null"
                    ],
                    "minimum": 0,
                    "maximum": 1
                  }
                },
                "additionalProperties": false,
                "required": [
                  "comparison",
                  "p_inconsistency"
                ]
              }
            }
          }
        },
        "transitivity_assessment": {
          "type": [
            "object",
            "null"
          ],
          "properties": {
            "assessment": {
              "type": "string",
              "enum": [
                "plausible",
                "questionable",
                "implausible",
                "not_assessed"
              ]
            },
            "narrative": {
              "type": "string"
            },
            "effect_modifiers_balanced": {
              "type": "boolean"
            },
            "similarity_table_source": {
              "$ref": "#/$defs/SourceRef"
            }
          }
        },
        "network_geometry": {
          "type": [
            "object",
            "null"
          ],
          "additionalProperties": false,
          "properties": {
            "nodes": {
              "type": "integer",
              "minimum": 0
            },
            "edges": {
              "type": "integer",
              "minimum": 0
            },
            "two_armed_loops": {
              "type": "integer",
              "minimum": 0
            },
            "multi_arm_studies": {
              "type": "integer",
              "minimum": 0
            },
            "network_plot_source": {
              "$ref": "#/$defs/SourceRef"
            }
          }
        },
        "contribution_matrix": {
          "type": [
            "object",
            "null"
          ],
          "description": "Contribution of each direct comparison to network estimates",
          "properties": {
            "matrix_source": {
              "$ref": "#/$defs/SourceRef"
            },
            "contributions": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "direct_comparison": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "network_estimate": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "contribution_pct": {
                    "type": [
                      "number",
                      "null"
                    ],
                    "minimum": 0,
                    "maximum": 100
                  }
                },
                "additionalProperties": false,
                "required": [
                  "contribution_pct",
                  "direct_comparison",
                  "network_estimate"
                ]
              }
            }
          }
        },
        "comparison_adjusted_funnel_plot": {
          "type": [
            "object",
            "null"
          ],
          "properties": {
            "plot_source": {
              "$ref": "#/$defs/SourceRef"
            },
            "interpretation": {
              "type": "string"
            }
          }
        },
        "league_table": {
          "type": [
            "object",
            "null"
          ],
          "properties": {
            "table_source": {
              "$ref": "#/$defs/SourceRef"
            },
            "format": {
              "type": "string",
              "enum": [
                "upper_triangle",
                "lower_triangle",
                "full_matrix"
              ]
            }
          }
        },
        "cinema_assessment": {
          "type": [
            "object",
            "null"
          ],
          "description": "CINeMA (Confidence in Network Meta-Analysis) framework for GRADE in NMA",
          "properties": {
            "within_study_bias": {
              "type": "string",
              "enum": [
                "no_concerns",
                "some_concerns",
                "major_concerns"
              ]
            },
            "reporting_bias": {
              "type": "string",
              "enum": [
                "no_concerns",
                "some_concerns",
                "major_concerns"
              ]
            },
            "indirectness": {
              "type": "string",
              "enum": [
                "no_concerns",
                "some_concerns",
                "major_concerns"
              ]
            },
            "imprecision": {
              "type": "string",
              "enum": [
                "no_concerns",
                "some_concerns",
                "major_concerns"
              ]
            },
            "heterogeneity": {
              "type": "string",
              "enum": [
                "no_concerns",
                "some_concerns",
                "major_concerns"
              ]
            },
            "incoherence": {
              "type": "string",
              "enum": [
                "no_concerns",
                "some_concerns",
                "major_concerns"
              ]
            },
            "overall_confidence": {
              "type": "string",
              "enum": [
                "high",
                "moderate",
                "low",
                "very_low"
              ]
            }
          }
        },
        "notes": {
          "type": [
            "string",
            "null"
          ]
        }
      }
    },
    "IPDMetaAnalysis": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "covariates",
        "effect_modifier_analysis",
        "model",
        "outcome_id",
        "pooled"
      ],
      "properties": {
        "outcome_id": {
          "type": "string"
        },
        "model": {
          "type": "string",
          "enum": [
            "one_stage",
            "two_stage"
          ]
        },
        "covariates": {
          "type": [
            "array",
            "null"
          ],
          "items": {
            "type": "string"
          },
          "default": []
        },
        "effect_modifier_analysis": {
          "type": [
            "string",
            "null"
          ]
        },
        "pooled": {
          "$ref": "#/$defs/PooledEffect"
        }
      }
    },
    "NarrativeSynthesis": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "fig_or_table",
        "outcome_id",
        "summary_text"
      ],
      "properties": {
        "outcome_id": {
          "type": "string"
        },
        "summary_text": {
          "type": "string"
        },
        "fig_or_table": {
          "$ref": "#/$defs/SourceRef"
        }
      }
    },
    "Synthesis": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "ipd_meta",
        "narrative",
        "network_meta",
        "outcome_id",
        "pairwise_meta",
        "type",
        "umbrella_summary"
      ],
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "narrative",
            "pairwise_meta",
            "network_meta",
            "ipd_meta",
            "umbrella_summary"
          ]
        },
        "outcome_id": {
          "type": "string"
        },
        "pairwise_meta": {
          "$ref": "#/$defs/PairwiseMetaAnalysis"
        },
        "network_meta": {
          "$ref": "#/$defs/NetworkMetaAnalysis"
        },
        "ipd_meta": {
          "$ref": "#/$defs/IPDMetaAnalysis"
        },
        "narrative": {
          "$ref": "#/$defs/NarrativeSynthesis"
        },
        "umbrella_summary": {
          "type": [
            "object",
            "null"
          ],
          "additionalProperties": false,
          "properties": {
            "evidence_map": {
              "type": "string"
            },
            "key_findings": {
              "type": "string"
            },
            "source": {
              "$ref": "#/$defs/SourceRef"
            }
          }
        }
      }
    },
    "GradeAssessment": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "absolute_effects",
        "certainty",
        "domains",
        "footnotes",
        "outcome_id",
        "starting_certainty",
        "summary_of_findings",
        "summary_of_findings_source",
        "upgrade_factors"
      ],
      "properties": {
        "outcome_id": {
          "type": "string"
        },
        "certainty": {
          "type": "string",
          "enum": [
            "high",
            "moderate",
            "low",
            "very_low"
          ]
        },
        "starting_certainty": {
          "type": [
            "string",
            "null"
          ],
          "enum": [
            "high",
            "low"
          ],
          "description": "Starting level for RCTs (high) or observational (low)"
        },
        "domains": {
          "type": [
            "object",
            "null"
          ],
          "additionalProperties": false,
          "properties": {
            "risk_of_bias": {
              "type": "string",
              "enum": [
                "no_serious",
                "serious",
                "very_serious",
                "unclear"
              ]
            },
            "inconsistency": {
              "type": "string",
              "enum": [
                "no_serious",
                "serious",
                "very_serious",
                "unclear"
              ]
            },
            "indirectness": {
              "type": "string",
              "enum": [
                "no_serious",
                "serious",
                "very_serious",
                "unclear"
              ]
            },
            "imprecision": {
              "type": "string",
              "enum": [
                "no_serious",
                "serious",
                "very_serious",
                "unclear"
              ]
            },
            "publication_bias": {
              "type": "string",
              "enum": [
                "no_serious",
                "serious",
                "very_serious",
                "unclear"
              ]
            },
            "other": {
              "type": "string"
            }
          }
        },
        "upgrade_factors": {
          "type": [
            "object",
            "null"
          ],
          "description": "Factors that may increase certainty for observational studies",
          "properties": {
            "large_effect": {
              "type": "string",
              "enum": [
                "none",
                "large",
                "very_large"
              ],
              "description": "RR >2 or <0.5 (large), >5 or <0.2 (very large)"
            },
            "dose_response_gradient": {
              "type": "boolean",
              "description": "Evidence of dose-response relationship"
            },
            "plausible_confounding": {
              "type": "boolean",
              "description": "All plausible confounding would reduce effect"
            }
          }
        },
        "absolute_effects": {
          "type": [
            "object",
            "null"
          ],
          "properties": {
            "baseline_risk": {
              "type": "object",
              "properties": {
                "value": {
                  "type": [
                    "number",
                    "null"
                  ],
                  "minimum": 0,
                  "maximum": 1
                },
                "source": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "description": "Source of baseline risk estimate"
                },
                "risk_category": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "enum": [
                    "low",
                    "moderate",
                    "high"
                  ]
                }
              },
              "additionalProperties": false,
              "required": [
                "risk_category",
                "source",
                "value"
              ]
            },
            "absolute_effect_per_1000": {
              "type": "object",
              "properties": {
                "control_risk": {
                  "type": [
                    "number",
                    "null"
                  ]
                },
                "intervention_risk": {
                  "type": [
                    "number",
                    "null"
                  ]
                },
                "absolute_difference": {
                  "type": [
                    "number",
                    "null"
                  ]
                },
                "ci_lower": {
                  "type": [
                    "number",
                    "null"
                  ]
                },
                "ci_upper": {
                  "type": [
                    "number",
                    "null"
                  ]
                }
              },
              "additionalProperties": false,
              "required": [
                "absolute_difference",
                "ci_lower",
                "ci_upper",
                "control_risk",
                "intervention_risk"
              ]
            }
          }
        },
        "summary_of_findings": {
          "type": [
            "object",
            "null"
          ],
          "properties": {
            "n_participants": {
              "type": "integer",
              "minimum": 0
            },
            "n_studies": {
              "type": "integer",
              "minimum": 0
            },
            "relative_effect": {
              "$ref": "#/$defs/ContrastEffect"
            },
            "anticipated_absolute_effects": {
              "type": "string"
            },
            "plain_language_summary": {
              "type": "string"
            }
          }
        },
        "footnotes": {
          "type": [
            "string",
            "null"
          ]
        },
        "summary_of_findings_source": {
          "$ref": "#/$defs/SourceRef"
        }
      }
    },
    "PrismaReporting": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "version": {
          "type": [
            "string",
            "null"
          ],
          "enum": [
            "PRISMA 2020",
            "PRISMA 2020-ScR",
            "PRISMA-NMA",
            "PRISMA-IPD",
            "PRISMA-S",
            "PRISMA-A",
            "MOOSE",
            "other"
          ],
          "default": "PRISMA 2020"
        },
        "claimed": {
          "type": [
            "boolean",
            "null"
          ],
          "default": false,
          "description": "Authors claim PRISMA adherence"
        },
        "flow_diagram_present": {
          "type": [
            "boolean",
            "null"
          ],
          "default": false
        },
        "checklist_available": {
          "type": [
            "boolean",
            "null"
          ],
          "default": false
        },
        "items": {
          "type": [
            "array",
            "null"
          ],
          "description": "Item-by-item PRISMA reporting status.",
          "items": {
            "$ref": "#/$defs/PrismaItem"
          },
          "default": []
        },
        "adherence_summary": {
          "type": [
            "object",
            "null"
          ],
          "additionalProperties": false,
          "properties": {
            "items_reported_count": {
              "type": "integer",
              "minimum": 0
            },
            "items_total_expected": {
              "type": "integer",
              "minimum": 0
            },
            "adherence_pct": {
              "type": "number",
              "minimum": 0,
              "maximum": 100
            }
          }
        },
        "checklist_source": {
          "$ref": "#/$defs/SourceRef"
        },
        "notes": {
          "type": [
            "string",
            "null"
          ]
        }
      },
      "required": [
        "adherence_summary",
        "checklist_available",
        "checklist_source",
        "claimed",
        "flow_diagram_present",
        "items",
        "notes",
        "version"
      ]
    },
    "PrismaItem": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "item_id",
        "location",
        "name",
        "notes",
        "reported",
        "section",
        "source"
      ],
      "properties": {
        "item_id": {
          "$ref": "#/$defs/PrismaItemId"
        },
        "name": {
          "type": [
            "string",
            "null"
          ],
          "description": "Short title of the PRISMA item (optional)"
        },
        "section": {
          "type": [
            "string",
            "null"
          ],
          "description": "Section of manuscript where item should appear"
        },
        "reported": {
          "type": "string",
          "enum": [
            "yes",
            "partially",
            "no",
            "unclear"
          ]
        },
        "location": {
          "type": [
            "string",
            "null"
          ],
          "description": "Page/figure/appendix location"
        },
        "source": {
          "$ref": "#/$defs/SourceRef"
        },
        "notes": {
          "type": [
            "string",
            "null"
          ]
        }
      }
    },
    "PrismaItemId": {
      "type": "string",
      "description": "Enumerated PRISMA 2020 checklist item or sub-item code.",
      "enum": [
        "1",
        "2",
        "3",
        "4",
        "5",
        "6",
        "7",
        "8",
        "9",
        "10a",
        "10b",
        "11",
        "12",
        "13a",
        "13b",
        "13c",
        "13d",
        "13e",
        "13f",
        "14",
        "15",
        "16a",
        "16b",
        "17",
        "18",
        "19",
        "20a",
        "20b",
        "20c",
        "20d",
        "21",
        "22",
        "23a",
        "23b",
        "23c",
        "23d",
        "24a",
        "24b",
        "24c",
        "25",
        "26",
        "27"
      ]
    },
    "Amstar2Assessment": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "overall": {
          "type": [
            "string",
            "null"
          ],
          "enum": [
            "high",
            "moderate",
            "low",
            "critically_low"
          ]
        },
        "rationale": {
          "type": [
            "string",
            "null"
          ]
        },
        "items": {
          "type": [
            "array",
            "null"
          ],
          "description": "AMSTAR 2 item-level ratings (1–16). Mark critical domains with critical=true.",
          "items": {
            "$ref": "#/$defs/Amstar2Item"
          },
          "default": []
        },
        "critical_domains": {
          "type": [
            "array",
            "null"
          ],
          "description": "List of item_ids marked critical in this assessment (subset of 1–16).",
          "items": {
            "type": "string",
            "pattern": "^(?:[1-9]|1[0-6])$"
          },
          "default": []
        },
        "source": {
          "$ref": "#/$defs/SourceRef"
        }
      },
      "required": [
        "critical_domains",
        "items",
        "overall",
        "rationale",
        "source"
      ]
    },
    "Amstar2Item": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "critical",
        "item_id",
        "notes",
        "rating"
      ],
      "properties": {
        "item_id": {
          "type": "string",
          "pattern": "^(?:[1-9]|1[0-6])$",
          "description": "AMSTAR 2 item 1–16"
        },
        "rating": {
          "type": "string",
          "enum": [
            "yes",
            "partial_yes",
            "no",
            "not_applicable",
            "unclear"
          ]
        },
        "critical": {
          "type": [
            "boolean",
            "null"
          ],
          "default": false
        },
        "notes": {
          "type": [
            "string",
            "null"
          ]
        }
      }
    },
    "OpenScience": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "data_availability": {
          "$ref": "#/$defs/Availability"
        },
        "code_availability": {
          "$ref": "#/$defs/Availability"
        }
      },
      "required": [
        "code_availability",
        "data_availability"
      ]
    },
    "Availability": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "statement": {
          "type": [
            "string",
            "null"
          ],
          "description": "Verbatim of summarized availability statement"
        },
        "links": {
          "type": [
            "array",
            "null"
          ],
          "items": {
            "$ref": "#/$defs/AvailabilityLink"
          },
          "default": []
        },
        "source": {
          "$ref": "#/$defs/SourceRef"
        }
      },
      "required": [
        "links",
        "source",
        "statement"
      ]
    },
    "AvailabilityLink": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "access",
        "doi",
        "label",
        "license",
        "notes",
        "url"
      ],
      "properties": {
        "label": {
          "type": [
            "string",
            "null"
          ]
        },
        "url": {
          "type": "string",
          "format": "uri"
        },
        "doi": {
          "type": [
            "string",
            "null"
          ],
          "pattern": "^10\\.\\d{4,9}/[-._;()/:A-Za-z0-9]+$"
        },
        "access": {
          "type": [
            "string",
            "null"
          ],
          "enum": [
            "open",
            "restricted",
            "upon_request",
            "embargoed",
            "unknown"
          ]
        },
        "license": {
          "type": [
            "string",
            "null"
          ],
          "description": "e.g., CC BY 4.0, GPL-3.0"
        },
        "notes": {
          "type": [
            "string",
            "null"
          ]
        }
      }
    },
    "SensitivityAnalysis": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "alternative_effect_measure",
        "analysis_type",
        "description",
        "fixed_vs_random_comparison",
        "leave_one_out",
        "outcome_id",
        "result",
        "rob_restriction",
        "source"
      ],
      "properties": {
        "analysis_type": {
          "type": "string",
          "enum": [
            "leave_one_out",
            "fixed_vs_random",
            "alternative_effect_measure",
            "risk_of_bias_restriction",
            "imputation_method",
            "outlier_exclusion",
            "subgroup_exclusion",
            "publication_year_restriction",
            "other"
          ]
        },
        "outcome_id": {
          "type": "string"
        },
        "description": {
          "type": [
            "string",
            "null"
          ]
        },
        "leave_one_out": {
          "type": [
            "object",
            "null"
          ],
          "properties": {
            "results": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "excluded_study": {
                    "type": [
                      "string",
                      "null"
                    ]
                  },
                  "pooled_effect": {
                    "$ref": "#/$defs/ContrastEffect"
                  },
                  "I2_pct": {
                    "type": [
                      "number",
                      "null"
                    ],
                    "minimum": 0,
                    "maximum": 100
                  },
                  "tau2": {
                    "type": [
                      "number",
                      "null"
                    ],
                    "minimum": 0
                  }
                },
                "additionalProperties": false,
                "required": [
                  "I2_pct",
                  "excluded_study",
                  "pooled_effect",
                  "tau2"
                ]
              }
            },
            "influential_studies": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Studies whose exclusion substantially changes results"
            }
          }
        },
        "fixed_vs_random_comparison": {
          "type": [
            "object",
            "null"
          ],
          "properties": {
            "fixed_effect": {
              "$ref": "#/$defs/ContrastEffect"
            },
            "random_effect": {
              "$ref": "#/$defs/ContrastEffect"
            },
            "agreement": {
              "type": "string",
              "enum": [
                "consistent",
                "minor_difference",
                "substantial_difference"
              ]
            }
          }
        },
        "alternative_effect_measure": {
          "type": [
            "object",
            "null"
          ],
          "properties": {
            "original_measure": {
              "type": "string"
            },
            "alternative_measure": {
              "type": "string"
            },
            "alternative_pooled_effect": {
              "$ref": "#/$defs/ContrastEffect"
            },
            "conclusion_changed": {
              "type": "boolean"
            }
          }
        },
        "rob_restriction": {
          "type": [
            "object",
            "null"
          ],
          "properties": {
            "inclusion_criteria": {
              "type": "string",
              "description": "e.g., 'only low risk of bias studies'"
            },
            "k_studies_included": {
              "type": "integer",
              "minimum": 0
            },
            "restricted_pooled_effect": {
              "$ref": "#/$defs/ContrastEffect"
            },
            "conclusion_changed": {
              "type": "boolean"
            }
          }
        },
        "result": {
          "type": [
            "object",
            "null"
          ],
          "properties": {
            "pooled_effect": {
              "$ref": "#/$defs/ContrastEffect"
            },
            "robustness_assessment": {
              "type": "string",
              "enum": [
                "robust",
                "moderately_robust",
                "not_robust",
                "unclear"
              ]
            },
            "interpretation": {
              "type": "string"
            }
          }
        },
        "source": {
          "$ref": "#/$defs/SourceRef"
        }
      }
    },
    "ContrastEffect": {
      "type": "object",
      "additionalProperties": false,
      "description": "Statistical effect estimate with confidence interval",
      "required": [
        "bayes_factor",
        "ci",
        "credible_interval",
        "favors",
        "p_value",
        "point",
        "posterior_probability",
        "type"
      ],
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "RR",
            "IRR",
            "OR",
            "HR",
            "MD",
            "SMD",
            "RD",
            "RMST",
            "Other"
          ],
          "description": "Type of effect measure (RR=Risk Ratio, OR=Odds Ratio, HR=Hazard Ratio, etc.)"
        },
        "point": {
          "type": "number",
          "description": "Point estimate of the effect"
        },
        "ci": {
          "$ref": "#/$defs/EffectCI"
        },
        "credible_interval": {
          "$ref": "#/$defs/BayesianInterval"
        },
        "p_value": {
          "type": [
            "number",
            "null"
          ],
          "minimum": 0,
          "maximum": 1,
          "description": "Statistical significance p-value"
        },
        "bayes_factor": {
          "type": [
            "number",
            "null"
          ],
          "minimum": 0,
          "description": "Bayesian evidence ratio (BF10 or BF01)"
        },
        "posterior_probability": {
          "type": [
            "number",
            "null"
          ],
          "minimum": 0,
          "maximum": 1,
          "description": "Posterior probability of effect direction"
        },
        "favors": {
          "type": [
            "string",
            "null"
          ],
          "enum": [
            "treatment_or_exposure",
            "control_or_reference",
            "neutral",
            "unclear"
          ],
          "default": "neutral",
          "description": "Which group the effect favors based on clinical interpretation"
        }
      }
    },
    "ExtractionWarning": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "code",
        "message",
        "source"
      ],
      "properties": {
        "code": {
          "type": "string",
          "enum": [
            "TABLE_PARSE_FAIL",
            "AMBIGUOUS_UNIT",
            "CI_PARSE_FAIL",
            "MISSING_ARM_ID",
            "MISSING_GROUP_ID",
            "OTHER"
          ]
        },
        "message": {
          "type": "string"
        },
        "source": {
          "$ref": "#/$defs/SourceRef"
        }
      }
    },
    "FigureSummary": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "caption",
        "figure_id",
        "key_values",
        "page",
        "source"
      ],
      "properties": {
        "figure_id": {
          "type": "string"
        },
        "caption": {
          "type": "string"
        },
        "key_values": {
          "type": [
            "object",
            "null"
          ],
          "additionalProperties": {
            "type": "number"
          },
          "default": {}
        },
        "page": {
          "type": [
            "integer",
            "null"
          ],
          "minimum": 1
        },
        "source": {
          "$ref": "#/$defs/SourceRef"
        }
      }
    },
    "ISO8601Duration": {
      "$anchor": "duration",
      "type": "string",
      "pattern": "^P(?:(?:\\d+Y)?(?:\\d+M)?(?:\\d+W)?(?:\\d+D)?)?(?:T(?:\\d+H)?(?:\\d+M)?(?:\\d+(?:\\.\\d+)?S)?)?$",
      "description": "Strict ISO 8601 duration (e.g., 'P30D', 'PT24H', 'P2W', 'P1Y2M3DT4H5M6S').",
      "examples": [
        "P30D",
        "PT24H",
        "P2W",
        "P6M",
        "P1Y",
        "PT2H30M",
        "P1Y2M3DT4H5M6.789S"
      ]
    },
    "LanguageCode": {
      "type": "string",
      "pattern": "^[a-z]{2,3}(-[A-Z]{2})?(-[a-z]{2,8})*$",
      "description": "BCP 47 language tag supporting language, region, and variants (e.g., 'en-US', 'zh-Hans-CN', 'ar-EG')",
      "examples": [
        "en",
        "en-US",
        "en-GB",
        "nl",
        "nl-NL",
        "nl-BE",
        "de-DE",
        "fr-FR",
        "es-ES",
        "zh-Hans",
        "zh-Hant",
        "ar-EG",
        "he-IL"
      ]
    },
    "Metadata": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "article_number",
        "authors",
        "conflict_of_interest",
        "content_hash_sha256",
        "doi",
        "eissn",
        "elocation_id",
        "epub_ahead_of_print_date",
        "external_ids",
        "funding",
        "issn",
        "issue",
        "journal",
        "journal_abbrev",
        "page_end",
        "page_start",
        "pages",
        "parsing_context",
        "pmcid",
        "pmid",
        "protocol_ref",
        "published_date",
        "published_date_precision",
        "registration",
        "source",
        "supplements",
        "title",
        "vancouver_citation",
        "vancouver_source",
        "volume"
      ],
      "properties": {
        "title": {
          "type": "string"
        },
        "journal": {
          "type": "string"
        },
        "journal_abbrev": {
          "type": [
            "string",
            "null"
          ]
        },
        "published_date": {
          "type": [
            "string",
            "null"
          ],
          "format": "date"
        },
        "published_date_precision": {
          "type": [
            "string",
            "null"
          ],
          "enum": [
            "year",
            "month",
            "day"
          ]
        },
        "volume": {
          "type": [
            "string",
            "null"
          ]
        },
        "issue": {
          "type": [
            "string",
            "null"
          ]
        },
        "pages": {
          "type": [
            "string",
            "null"
          ]
        },
        "page_start": {
          "type": [
            "string",
            "null"
          ]
        },
        "page_end": {
          "type": [
            "string",
            "null"
          ]
        },
        "article_number": {
          "type": [
            "string",
            "null"
          ]
        },
        "elocation_id": {
          "type": [
            "string",
            "null"
          ]
        },
        "issn": {
          "type": [
            "string",
            "null"
          ],
          "pattern": "^\\d{4}-\\d{3}[\\dxX]$",
          "description": "International Standard Serial Number (print version)"
        },
        "eissn": {
          "type": [
            "string",
            "null"
          ],
          "pattern": "^\\d{4}-\\d{3}[\\dxX]$",
          "description": "Electronic International Standard Serial Number"
        },
        "authors": {
          "type": [
            "array",
            "null"
          ],
          "items": {
            "$ref": "#/$defs/Author"
          },
          "default": []
        },
        "pmid": {
          "type": [
            "string",
            "null"
          ],
          "pattern": "^\\d{1,8}$"
        },
        "pmcid": {
          "type": [
            "string",
            "null"
          ],
          "pattern": "^PMC\\d+$"
        },
        "doi": {
          "type": [
            "string",
            "null"
          ],
          "pattern": "^10\\.\\d{4,}(\\.\\d+)?/[-._;()/:A-Za-z0-9\\[\\]]+$",
          "description": "DOI with comprehensive character support including brackets and extended punctuation",
          "examples": [
            "10.1056/NEJMoa2001017",
            "10.1002/(SICI)1097-0142(19960101)77:1<1::AID-CNCR1>3.0.CO;2-Z"
          ]
        },
        "registration": {
          "$ref": "#/$defs/Registration"
        },
        "protocol_ref": {
          "type": [
            "string",
            "null"
          ]
        },
        "funding": {
          "type": [
            "string",
            "null"
          ]
        },
        "conflict_of_interest": {
          "type": [
            "string",
            "null"
          ]
        },
        "epub_ahead_of_print_date": {
          "type": [
            "string",
            "null"
          ]
        },
        "vancouver_citation": {
          "type": [
            "string",
            "null"
          ]
        },
        "vancouver_source": {
          "$ref": "#/$defs/SourceRef"
        },
        "source": {
          "$ref": "#/$defs/SourceRef"
        },
        "external_ids": {
          "type": [
            "array",
            "null"
          ],
          "items": {
            "$ref": "#/$defs/ExternalId"
          },
          "default": []
        },
        "supplements": {
          "type": [
            "array",
            "null"
          ],
          "items": {
            "$ref": "#/$defs/SupplementFile"
          },
          "default": []
        },
        "parsing_context": {
          "$ref": "#/$defs/ParsingContext"
        },
        "content_hash_sha256": {
          "type": [
            "string",
            "null"
          ],
          "pattern": "^[a-fA-F0-9]{64}$",
          "description": "SHA-256 hash van bronbestand of platte tekst (64-char hex)"
        }
      }
    },
    "ParsedTable": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "page",
        "rows",
        "source",
        "table_id",
        "title",
        "type"
      ],
      "properties": {
        "table_id": {
          "type": "string"
        },
        "title": {
          "type": "string"
        },
        "page": {
          "type": [
            "integer",
            "null"
          ],
          "minimum": 1
        },
        "type": {
          "type": [
            "string",
            "null"
          ],
          "enum": [
            "baseline",
            "outcomes",
            "harms",
            "methods",
            "other"
          ]
        },
        "rows": {
          "type": [
            "array",
            "null"
          ],
          "items": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "cells"
            ],
            "properties": {
              "cells": {
                "type": "array",
                "minItems": 1,
                "items": {
                  "type": "string"
                }
              }
            }
          },
          "default": []
        },
        "source": {
          "$ref": "#/$defs/SourceRef"
        }
      }
    },
    "Registration": {
      "type": "object",
      "additionalProperties": false,
      "description": "Clinical trial or study registration information",
      "properties": {
        "registry": {
          "type": [
            "string",
            "null"
          ],
          "enum": [
            "ClinicalTrials.gov",
            "ISRCTN",
            "EudraCT",
            "EU-CTR",
            "CTIS",
            "ChiCTR",
            "ANZCTR",
            "UMIN-CTR",
            "JPRN",
            "PACTR",
            "IRCT",
            "DRKS",
            "TCTR",
            "SLCTR",
            "RPCEC",
            "REBEC",
            "Other"
          ],
          "description": "Clinical trial registry (includes major international and regional registries)"
        },
        "identifier": {
          "type": [
            "string",
            "null"
          ],
          "description": "Registration identifier within the registry",
          "examples": [
            "NCT04123456",
            "ISRCTN12345678",
            "2020-001234-56",
            "UMIN000012345"
          ]
        },
        "url": {
          "type": [
            "string",
            "null"
          ],
          "format": "uri",
          "description": "Direct URL to the registration record"
        }
      },
      "required": [
        "identifier",
        "registry",
        "url"
      ]
    },
    "RiskOfBias": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "tool": {
          "type": [
            "string",
            "null"
          ],
          "enum": [
            "RoB2",
            "ROBINS-I",
            "PROBAST",
            "Other"
          ]
        },
        "overall": {
          "type": [
            "string",
            "null"
          ]
        },
        "domains": {
          "type": [
            "array",
            "null"
          ],
          "items": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "domain",
              "judgement",
              "notes"
            ],
            "properties": {
              "domain": {
                "type": "string"
              },
              "judgement": {
                "type": "string",
                "enum": [
                  "low",
                  "some",
                  "high",
                  "unclear",
                  "moderate",
                  "serious",
                  "critical",
                  "no_information",
                  "some_concerns"
                ]
              },
              "notes": {
                "type": [
                  "string",
                  "null"
                ]
              }
            }
          },
          "default": []
        },
        "applicability": {
          "type": [
            "object",
            "null"
          ],
          "additionalProperties": false,
          "properties": {
            "participants": {
              "type": "string",
              "enum": [
                "low",
                "high",
                "unclear"
              ]
            },
            "predictors": {
              "type": "string",
              "enum": [
                "low",
                "high",
                "unclear"
              ]
            },
            "outcome": {
              "type": "string",
              "enum": [
                "low",
                "high",
                "unclear"
              ]
            },
            "notes": {
              "type": "string"
            }
          }
        },
        "provenance": {
          "$ref": "#/$defs/Provenance"
        }
      },
      "required": [
        "applicability",
        "domains",
        "overall",
        "provenance",
        "tool"
      ]
    },
    "SourceRef": {
      "type": "object",
      "additionalProperties": false,
      "description": "Reference to a specific location within a document",
      "properties": {
        "anchor": {
          "type": [
            "string",
            "null"
          ],
          "description": "Free-text pointer like 'Table 2', 'Fig 1', or sentence quote"
        },
        "page": {
          "type": [
            "integer",
            "null"
          ],
          "minimum": 1,
          "description": "Page number within the document"
        },
        "figure_id": {
          "type": [
            "string",
            "null"
          ],
          "description": "Identifier of a specific figure"
        },
        "table_id": {
          "type": [
            "string",
            "null"
          ],
          "description": "Identifier of a specific table"
        }
      },
      "required": [
        "anchor",
        "figure_id",
        "page",
        "table_id"
      ]
    },
    "TruncationInfo": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "value": {
          "type": [
            "boolean",
            "null"
          ],
          "default": false
        },
        "reason": {
          "type": [
            "string",
            "null"
          ],
          "enum": [
            "token_limit",
            "page_limit",
            "timeout",
            "other"
          ]
        }
      },
      "required": [
        "reason",
        "value"
      ]
    }
  }
}
