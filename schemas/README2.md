# Schema Catalogue

Canonical JSON Schemas and their bundled artefacts live here. They describe the structure of extraction outputs for each supported study type and are validated at runtime by `src/schemas_loader.py` and in CI via `make validate-schemas`.

## Layout
| File | Purpose |
| --- | --- |
| `*_schema.json` | Canonical per-study schema definitions (classification, editorials, interventional, observational, evidence synthesis, prediction/prognosis, validation). |
| `*_bundled.json` | Pre-bundled variants generated by `json-bundler.py` to embed `$ref` dependencies for clients that cannot dereference remote files. |
| `common.schema.json` | Shared definitions referenced by multiple study schemas. |
| `json-bundler.py` | Utility that resolves `$ref` chains into a single document; used by CI and release tooling. |

## Working With Schemas
- Update canonical schemas first, then regenerate bundled files with `make bundle-schemas` (which runs `json-bundler.py`).
- Ensure breaking changes are reflected in `CHANGELOG.md` and coordinate prompt updates so field names stay aligned.
- Add or update fixtures under `tests/fixtures/schemas/` to cover new fields and maintain regression coverage.
- Use `python validate_schemas.py` or `make validate-schemas` before pushing to confirm structural integrity.
